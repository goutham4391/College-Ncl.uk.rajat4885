$(document).ready(function(){animatingInfographic.loadData(),$("li a.t4tab").on("click",function(){var tabID=$(this).parent().data("tab")-1;$(".tab-wrapper").find(".tab:eq("+tabID+") section.statistics .slick-slider").length&&setTimeout(function(){console.log("In tab containing Slick - refreshing slider.."),$(".tab:eq("+tabID+") section.statistics .slick-slider").get(0).slick.refresh()},300)})});var animatingInfographic={data:[],statsContainer:$(".statistics"),statsMarkup:"",scrollTriggeredAnimation:!1,loadData:function(){var currentCourseMeta=$("meta[name=ncl_course_title]").attr("content"),currentCourse=encodeURI(currentCourseMeta),endpoint="//includes.ncl.ac.uk/cmswebservices/pg/careersWidget/ws.php?title="+currentCourse;$.ajax({method:"GET",url:endpoint,dataType:"json"}).done(function(data){animatingInfographic.data=data,void 0!==data.coursetitle&&""!==data.coursetitle&&null!==data.coursetitle&&(animatingInfographic.statisticsInit(),animatingInfographic.generateStatistics(),animatingInfographic.initStatCarousel(),animatingInfographic.animateStats(),$(window).scroll(function(){animatingInfographic.animateStats()}))}).fail(function(error){console.error("There was an error with the ajax request!",error)})},statisticsInit:function(){animatingInfographic.workOrFurtherStudy(),animatingInfographic.sixMonthsAfterGraduating(),animatingInfographic.averageSalary(),animatingInfographic.jobTitlesHeld(),animatingInfographic.furtherStudyAtNCL(),animatingInfographic.employersSample()},workOrFurtherStudy:function(){var statData=animatingInfographic.data.workOrFS,statDescription=workOrFSDesc;null!==statData&&statData.length&&animatingInfographic.pieChartStat(statData,statDescription)},sixMonthsAfterGraduating:function(){var statData=[],statTitles=["in work","in further study","unemployed","other activities"],statWorkOrFs=animatingInfographic.data.workOrFS,statDescription=sixMonthsAfterDesc;statData.push(animatingInfographic.data.inWork,animatingInfographic.data.inFS,animatingInfographic.data.unemployed,animatingInfographic.data.otherActivities),null!==statData&&statData.length&&animatingInfographic.barChartStat(statData,statTitles,statWorkOrFs,statDescription)},averageSalary:function(){var statData=animatingInfographic.data.averageSalary,statRespondants=animatingInfographic.data.salaryRespondents,statDescription=[salaryDesc1,salaryDesc2];null!==statData&&statData.length&&animatingInfographic.salaryStat(statData,statRespondants,statDescription)},jobTitlesHeld:function(){var statData=animatingInfographic.data.jobTitles.split(","),statHeading=jobTitlesHeading,statSummary=jobTitlesSummary;null!==statData&&statData.length&&animatingInfographic.titleStat(statData,statHeading,statSummary)},furtherStudyAtNCL:function(){var statData=animatingInfographic.data.studyNCL,statDescription=furtherStudyNCL;null!==statData&&statData.length&&animatingInfographic.pieChartStat(statData,statDescription)},employersSample:function(){var statData=animatingInfographic.data.employers.split(","),statHeading=employersHeading,statSummary=employersSummary;null!==statData&&statData.length&&animatingInfographic.titleStat(statData,statHeading,statSummary)},pieChartStat:function(statData,statDescription){var StatMarkUp='<div class="stat pieChartStat">                             <div class="pieChart">                                 <svg version="1.1" xmlns="http://www.w3.org/2000/svg">                                     <circle class="pieChartCircle" cx="77" cy="77" r="72" />                                     <circle class="pieChartFill" cx="77" cy="77" r="72" />                                 </svg>                                 <span class="statNumber js-statNumber"><span data-stat="workOrFS">'+statData+'</span>%</span>                             </div>                             <p class="statDescription">'+statDescription+"</p>                         </div>";animatingInfographic.statsMarkup+=StatMarkUp,animatingInfographic.pieChartAnimate()},barChartStat:function(statData,statTitles,statWorkOrFs,statDescription){for(var barList="",i=0;i<statData.length;i++)barList+='<span class="bar"><span class="fill" data-fill="'+statData[i]+'"></span><span class="barLabel">'+statData[i]+"% "+statTitles[i]+"</span></span>";var StatMarkUp='<div class="stat barChartStat">                             <span class="barChartHeading">6 Months</span>                             <span class="barChartTagline">after graduating</span>                             <div class="barChart">'+barList+'</div>                             <p class="statDescription"><span>'+statWorkOrFs+"% "+statDescription+"</p>                         </div>";animatingInfographic.statsMarkup+=StatMarkUp},salaryStat:function(statData,statRespondants,statDescription){var StatMarkUp='<div class="stat salaryStat">                             <span class="salaryNumber">&#163;<span>'+statData+'</span></span>                             <span class="salaryHeading">Average Salary</span>                             <div class="stackingCoins">                                 <div class="coinCol">                                     <span class="coin"></span>                                     <span class="coin"></span>                                     <span class="coin"></span>                                     <span class="coin"></span>                                 </div>                                 <div class="coinCol">                                     <span class="coin"></span>                                     <span class="coin"></span>                                     <span class="coin"></span>                                     <span class="coin"></span>                                 </div>                                 <div class="coinCol">                                     <span class="coin"></span>                                     <span class="coin"></span>                                     <span class="coin"></span>                                     <span class="coin"></span>                                 </div>                                 <div class="coinCol">                                     <span class="coin"></span>                                     <span class="coin"></span>                                     <span class="coin"></span>                                </div>                             </div>                             <p class="statDescription">'+statDescription[0]+"                                 <span>"+statRespondants+"</span>                                 "+statDescription[1]+"</p>                         </div>";animatingInfographic.statsMarkup+=StatMarkUp},titleStat:function(statData,statHeading,statSummary){for(var titleList="",i=0;i<statData.length;i++)titleList+="<li>"+statData[i]+"</li>";var StatMarkUp='<div class="stat jobTitleStat">                             <p class="jobTitleIntro">                                 A sample of <span>'+statHeading+"</span>                                 "+statSummary+"</p>                             <ul>"+titleList+"</ul>                         </div>";animatingInfographic.statsMarkup+=StatMarkUp},generateStatistics:function(){$(".wrapper",animatingInfographic.statsContainer).append(animatingInfographic.statsMarkup).after('<p class="caveatText">'+animatingInfographic.data.caveat+"</p>")},pieChartAnimate:function(){if($(".pieChart").length){var statToAnimate,percentageInt,border,pathLength,strokeDistanceToTravel,duration,durationForFullCircle=1500;$(".pieChart").each(function(){($(window).width()<1023||$(this).parent().hasClass("slick-active"))&&(statToAnimate=$(this),border=$(".pieChartFill",statToAnimate),percentageInt=parseFloat($(".statNumber span",statToAnimate).text()),pathLength=2*Math.PI*border.attr("r"),100>=percentageInt?(strokeDistanceToTravel=440-pathLength/100*percentageInt,duration=durationForFullCircle*(percentageInt/100)):(strokeDistanceToTravel=0,duration=durationForFullCircle),border.animate({strokeDashoffset:strokeDistanceToTravel},duration))})}},barChartAnimate:function(){if($(".barChart").length){var statToAnimate,percentageInt,barFill,duration=900;$(".bar").each(function(){($(window).width()<1023||$(this).closest(".stat").hasClass("slick-active"))&&(statToAnimate=$(this),barFill=$(".fill",statToAnimate),percentageInt=barFill.data("fill")<=100?parseFloat(barFill.data("fill")):100,barFill.animate({height:percentageInt+"%"},duration))})}},coinAnimate:function(){$(".salaryStat").length&&$(".stackingCoins").each(function(){var coinStack=$(this),delay=0;$(".coin",coinStack).each(function(){if($(window).width()<1023||$(this).closest(".stat").hasClass("slick-active")){var coinToAnimate=$(this);setTimeout(function(){coinToAnimate.addClass("fallen")},delay),delay+=90}})})},animateStats:function(){var scrollTop=$(window).scrollTop(),windowHeight=$(window).height();animatingInfographic.scrollTriggeredAnimation||scrollTop+windowHeight/2>animatingInfographic.statsContainer.offset().top&&(animatingInfographic.animate(),animatingInfographic.scrollTriggeredAnimation=!0)},animate:function(){animatingInfographic.pieChartAnimate(),animatingInfographic.barChartAnimate(),animatingInfographic.coinAnimate()},resetAnimations:function(){$(".coin").stop(!0),$(".coin").removeClass("fallen"),$(".pieChartFill").stop(!0),$(".pieChartFill").css("strokeDashoffset","465"),$(".bar .fill").stop(!0),$(".bar .fill").css("height","0")},initStatCarousel:function(){$(window).width()>1023&&$(".wrapper").slick({slidesToShow:3,slidesToScroll:3,prevArrow:'<button type="button" class="prev carouselNavButton" aria-label="Previous" data-widget-type="scroll">Previous</button>',nextArrow:'<button type="button" class="next carouselNavButton" aria-label="Next" data-widget-type="scroll">Next</button>',onBeforeChange:animatingInfographic.resetAnimations,onAfterChange:animatingInfographic.animate,responsive:[{breakpoint:1139,settings:{slidesToShow:2,slidesToScroll:2}}]})}};