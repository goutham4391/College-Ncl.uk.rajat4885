var dataLayerEvents=function(){var e,a,t,s,n,r={dropdownClick:function(t,s){if(s.hasClass("dropDownHeading"))e=t.hasClass("dropdown")?"accordion-expand-full":"accordion-expand-partial",a=s.text().trim();else if(s.hasClass("toggle")||s.hasClass("courseMore")){e="accordion-expand-full";var n=s.parents(".course").find(".courseTitle .courseName").first().text().trim();a=n}else{var i=s.parents(".dropDownBlock").children(".dropDownHeading").text().trim();a="accordion:"+i+":"+s.text().trim(),e="cta-click"}r.pushData()},gallery:function(t,s){s.hasClass("slick-arrow")?(a="media-gallery:"+s.text().trim().toLowerCase(),e="on-page-elements",r.pushData()):s.hasClass("btn")?(a="media-gallery: cta-click:"+s.text().trim(),e="on-page-elements",r.pushData()):s.hasClass("videoOverlay")&&(a="media-gallery: video-play",e="on-page-elements",r.pushData())},linkClick:function(t,s){a=t.hasClass("articleList")?s.find("h4").text().trim():s.text().trim(),e="link-click",r.pushData()},ctaClick:function(t,s){a=s.text().trim(),e="cta-click",r.pushData()},media:function(){e="cta-click",a="video-play",r.pushData()},courseSearch:function(a){t=a.find(".searchBoxInput").val(),n=$(".search input[name=filterBy]:checked").val(),s=n,e="course-search",r.pushDataCourseSearch()},search:function(a){t=a.find(".searchBoxInput").val(),e="top-nav-search",r.pushDataSearch()},relatedPeople:function(t,s){var n="",i="";(s.hasClass("relatedPersonLinkTel")||s.hasClass("relatedPersonLinkMail"))&&(n=s.parents(".relatedPerson").find("h4").text().trim(),i=s.hasClass("relatedPersonLinkTel")?"telephone-link":"email-link",a=n+":"+i,e="people-carousel",r.pushData())},widgetClick:function(t,s){var n=t.attr("data-type");e=n+"-widget-selection",a=s.val(),r.pushData()},pushData:function(){dataLayer.push({event:"click",eventCategory:"2018-refresh-events",eventAction:e,label:a})},pushDataCourseSearch:function(){dataLayer.push({event:"click",eventCategory:"2018-refresh-events",eventAction:e,searchTerm:t,searchArea:s})},pushDataSearch:function(){dataLayer.push({event:"click",eventCategory:"2018-refresh-events",eventAction:e,searchTerm:t})}};return{init:function(){$("body").on({click:function(){var e=$(this),a=e.closest("section, .header, .footer");if(1===a.length){var t=a[0].className.split(" "),s=["dualPanel","fullWidthBanner","promoBanner","promoPanels","relatedProjects","articleList"],n=!1,i=["introPanel","individualCTA","ctaBlock","mediaWidget","newsFeed"],l=!1,c=["dropdown","courseDropDowns"],o=!1;t.forEach(function(e){-1!==c.indexOf(e)?o=!0:-1!==i.indexOf(e)?l=!0:-1!==s.indexOf(e)&&(n=!0)}),!0===o?r.dropdownClick(a,e):!0===l?r.ctaClick(a,e):!0===n&&!1===e.hasClass("labelLink")&&!1===e.hasClass("paginationButton")?r.linkClick(a,e):a.hasClass("videoBlock")?r.media(a,e):a.hasClass("gallery")?r.gallery(a,e):a.hasClass("relatedPeople")&&r.relatedPeople(a,e)}}},"a, button"),$("body").on("click","input.searchSubmit",function(){var e=$(this).closest("section, .headerSearchBox");e.hasClass("search")?r.courseSearch(e):e.hasClass("headerSearchBox")&&r.search(e)}),$("body").on({change:function(){var e=$(this),a=e.closest("section, .header, .footer");if(1===a.length){var t=a[0].className.split(" "),s=["dataWidget"],n=!1;t.forEach(function(e){-1!==s.indexOf(e)&&(n=!0)}),!0===n&&r.widgetClick(a,e)}}},"select")}}};$(document).ready(function(){dataLayerEvents().init()});